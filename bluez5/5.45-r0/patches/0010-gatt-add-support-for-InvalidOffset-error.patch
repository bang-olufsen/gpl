From 409a1bd0b172fedfc4a6db8757a2488d9c70f634 Mon Sep 17 00:00:00 2001
From: Bernhard Miller <bernhard.miller@streamunlimited.com>
Date: Wed, 1 Mar 2017 10:35:44 +0100
Subject: [PATCH] gatt: add support for InvalidOffset error

Signed-off-by: Bernhard Miller <bernhard.miller@streamunlimited.com>
---
 doc/gatt-api.txt    | 1 +
 src/gatt-database.c | 3 +++
 2 files changed, 4 insertions(+)

diff --git a/doc/gatt-api.txt b/doc/gatt-api.txt
index 6c98b87..4ca27b3 100644
--- a/doc/gatt-api.txt
+++ b/doc/gatt-api.txt
@@ -75,6 +75,7 @@ Methods		array{byte} ReadValue(dict options)
 					 org.bluez.Error.NotPermitted
 					 org.bluez.Error.NotAuthorized
 					 org.bluez.Error.NotSupported
+					 org.bluez.Error.InvalidOffset
 
 		void WriteValue(array{byte} value, dict options)
 
diff --git a/src/gatt-database.c b/src/gatt-database.c
index 5979e37..45edb9b 100644
--- a/src/gatt-database.c
+++ b/src/gatt-database.c
@@ -1536,6 +1536,9 @@ static uint8_t dbus_error_to_att_ecode(const char *error_name)
 	if (strcmp(error_name, "org.bluez.Error.InProgress") == 0)
 		return BT_ERROR_ALREADY_IN_PROGRESS;
 
+	if (strcmp(error_name, "org.bluez.Error.InvalidOffset") == 0)
+		return BT_ATT_ERROR_INVALID_OFFSET;
+
 	return 0;
 }
 
-- 
2.7.4

