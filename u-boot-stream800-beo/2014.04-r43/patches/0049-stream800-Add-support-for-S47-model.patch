From 7f2ec6fe2373f5dbef2c0d515575ec106b71e1d4 Mon Sep 17 00:00:00 2001
From: Marek Belisko <marek.belisko@streamunlimited.com>
Date: Thu, 11 Jun 2015 15:32:35 +0200
Subject: [PATCH] stream800: Add support for S47 model

Signed-off-by: Marek Belisko <marek.belisko@streamunlimited.com>
---
 board/streamunlimited/stream800/board.c         | 5 +++++
 board/streamunlimited/stream800/board_defines.c | 3 +++
 board/streamunlimited/stream800/board_defines.h | 1 +
 3 files changed, 9 insertions(+)

diff --git a/board/streamunlimited/stream800/board.c b/board/streamunlimited/stream800/board.c
index 6d1ab9f..50c836f 100755
--- a/board/streamunlimited/stream800/board.c
+++ b/board/streamunlimited/stream800/board.c
@@ -163,6 +163,7 @@ int board_init(void)
 		case CBT_BeoASE_A9MK2:
 		case CBT_BeoASE_EZ2MK2:
 		case CBT_BeoASE_CA6:
+		case CBT_BeoASE_S47:
 			beo_ase__set_board_interface();
 			beo_ase__set_ase_fep(fep_instance());
 			break;
@@ -378,6 +379,9 @@ int board_late_init(void)
 		case CBT_BeoASE_CA6:
 			setenv("board_conf", "#conf@3");
 			break;
+		case CBT_BeoASE_S47:
+			setenv("board_conf", "#conf@4");
+			break;
 		default:
 			setenv("board_conf", "");
 			break;
@@ -442,6 +446,7 @@ int board_late_init(void)
 		case CBT_BeoASE_A9MK2:
 		case CBT_BeoASE_EZ2MK2:
 		case CBT_BeoASE_CA6:
+		case CBT_BeoASE_S47:
 			break;
 
 		// CUSTOMIZE: Add your board here
diff --git a/board/streamunlimited/stream800/board_defines.c b/board/streamunlimited/stream800/board_defines.c
index 6f07889..4af6ca9 100644
--- a/board/streamunlimited/stream800/board_defines.c
+++ b/board/streamunlimited/stream800/board_defines.c
@@ -23,6 +23,7 @@ const char *stream800CarrierBoardTypeStrings[] = {
 	[CBT_BeoASE_A9MK2]		= "B&O ASE A9MK2 board",
 	[CBT_BeoASE_EZ2MK2]		= "B&O ASE EZ2MK2 board",
 	[CBT_BeoASE_CA6]		= "B&O ASE CA6 board",
+	[CBT_BeoASE_S47]		= "B&O ASE S47 board",
 };
 
 const char *boardStateStrings[] = {
@@ -102,6 +103,8 @@ void board_detect(struct Stream800Board *board)
 			board->carrierBoardType = CBT_BeoASE_EZ2MK2;
 		} else if (version.productId == ca6 ) {
 			board->carrierBoardType = CBT_BeoASE_CA6;
+		} else if (version.productId == s47) {
+			board->carrierBoardType = CBT_BeoASE_S47;
 		}
 
 		/*
diff --git a/board/streamunlimited/stream800/board_defines.h b/board/streamunlimited/stream800/board_defines.h
index dabb885..3f6057d 100644
--- a/board/streamunlimited/stream800/board_defines.h
+++ b/board/streamunlimited/stream800/board_defines.h
@@ -30,6 +30,7 @@ typedef enum {
 	CBT_BeoASE_A9MK2,
 	CBT_BeoASE_EZ2MK2,
 	CBT_BeoASE_CA6,
+	CBT_BeoASE_S47,
 } Stream800CarrierBoardType;
 
 extern const char *stream800CarrierBoardTypeStrings[];
-- 
2.7.4

