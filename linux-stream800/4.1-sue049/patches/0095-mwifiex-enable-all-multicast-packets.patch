From d4b4f90db24b637de4c8feef97f9415b3ed91765 Mon Sep 17 00:00:00 2001
From: Martin Valasek <martin.valasek@streamunlimited.com>
Date: Thu, 12 Nov 2020 13:44:29 +0100
Subject: [PATCH] mwifiex: enable all multicast packets

Signed-off-by: Martin Elias <martin.elias@streamunlimited.com>
---
 drivers/net/wireless/mwifiex/main.c | 7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)

diff --git a/drivers/net/wireless/mwifiex/main.c b/drivers/net/wireless/mwifiex/main.c
index 31d2792..5dc893e 100644
--- a/drivers/net/wireless/mwifiex/main.c
+++ b/drivers/net/wireless/mwifiex/main.c
@@ -831,13 +831,8 @@ static void mwifiex_set_multicast_list(struct net_device *dev)
 
 	if (dev->flags & IFF_PROMISC) {
 		mcast_list.mode = MWIFIEX_PROMISC_MODE;
-	} else if (dev->flags & IFF_ALLMULTI ||
-		   netdev_mc_count(dev) > MWIFIEX_MAX_MULTICAST_LIST_SIZE) {
-		mcast_list.mode = MWIFIEX_ALL_MULTI_MODE;
 	} else {
-		mcast_list.mode = MWIFIEX_MULTICAST_MODE;
-		mcast_list.num_multicast_addr =
-			mwifiex_copy_mcast_addr(&mcast_list, dev);
+		mcast_list.mode = MWIFIEX_ALL_MULTI_MODE;
 	}
 	mwifiex_request_set_multicast_list(priv, &mcast_list);
 }
-- 
2.7.4

