From 30e061219b492802985aff78bca3f0d25f499e8d Mon Sep 17 00:00:00 2001
From: Martin Geier <martin.geier@streamunlimited.com>
Date: Wed, 5 Jul 2017 12:24:34 +0200
Subject: [PATCH] googlecast: add cmake file to compile libdbus-c++ without
 stdc++

Signed-off-by: Martin Geier <martin.geier@streamunlimited.com>
---
 CMakeLists.txt | 43 +++++++++++++++++++++++++++
 config.h       | 91 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 134 insertions(+)
 create mode 100644 CMakeLists.txt
 create mode 100644 config.h

diff --git a/CMakeLists.txt b/CMakeLists.txt
new file mode 100644
index 0000000..13a7a0a
--- /dev/null
+++ b/CMakeLists.txt
@@ -0,0 +1,45 @@
+cmake_minimum_required(VERSION 2.8.12)
+
+set(dbus-c++_SOURCES
+	src/connection.cpp
+	src/debug.cpp
+	src/dispatcher.cpp
+	src/error.cpp
+	src/eventloop.cpp
+	src/eventloop-integration.cpp
+	src/interface.cpp
+	src/introspection.cpp
+	src/message.cpp
+	src/object.cpp
+	src/pendingcall.cpp
+	src/pipe.cpp
+	src/property.cpp
+	src/server.cpp
+	src/types.cpp
+)
+
+file (GLOB_RECURSE dbus-c++_HEADERS include/dbus-c++/*)
+
+add_library(dbus-c++-1
+	SHARED
+	${dbus-c++_SOURCES}
+	${dbus-c++_HEADERS}
+)
+
+find_package(PkgConfig)
+pkg_check_modules(DBUS1 REQUIRED dbus-1)
+
+include_directories(include)
+include_directories(./)
+include_directories(${DBUS1_INCLUDE_DIRS})
+
+add_definitions(-DHAVE_CONFIG_H)
+
+target_link_libraries(dbus-c++-1
+	pthread
+	${DBUS1_LIBRARIES}
+)
+
+set_target_properties(dbus-c++-1 PROPERTIES VERSION "0.9.0" SOVERSION 0)
+
+install(TARGETS dbus-c++-1 DESTINATION ${CMAKE_INSTALL_PREFIX}/lib)
diff --git a/config.h b/config.h
new file mode 100644
index 0000000..a995ec6
--- /dev/null
+++ b/config.h
@@ -0,0 +1,91 @@
+/* config.h.  Generated from config.h.in by configure.  */
+/* config.h.in.  Generated from configure.ac by autoheader.  */
+
+/* unstable DBus */
+/* #undef DBUS_API_SUBJECT_TO_CHANGE */
+
+/* DBus supports recursive mutexes (needs DBus >= 0.95) */
+#define DBUS_HAS_RECURSIVE_MUTEX /**/
+
+/* dbus_threads_init_default (needs DBus >= 0.93) */
+#define DBUS_HAS_THREADS_INIT_DEFAULT /**/
+
+/* to enable hidden symbols */
+#define GCC_HASCLASSVISIBILITY 1
+
+/* Define to 1 if you have the `clock_gettime' function. */
+#define HAVE_CLOCK_GETTIME 1
+
+/* Define to 1 if you have the <dlfcn.h> header file. */
+#define HAVE_DLFCN_H 1
+
+/* Define to 1 if you have the <expat.h> header file. */
+#define HAVE_EXPAT_H 1
+
+/* Define to 1 if you have the <inttypes.h> header file. */
+#define HAVE_INTTYPES_H 1
+
+/* Define to 1 if you have the <memory.h> header file. */
+#define HAVE_MEMORY_H 1
+
+/* Define if you have POSIX threads libraries and header files. */
+#define HAVE_PTHREAD 1
+
+/* Define to enable pthread support */
+#define HAVE_PTHREAD_H 1
+
+/* Define to 1 if you have the <stdint.h> header file. */
+#define HAVE_STDINT_H 1
+
+/* Define to 1 if you have the <stdlib.h> header file. */
+#define HAVE_STDLIB_H 1
+
+/* Define to 1 if you have the <strings.h> header file. */
+#define HAVE_STRINGS_H 1
+
+/* Define to 1 if you have the <string.h> header file. */
+#define HAVE_STRING_H 1
+
+/* Define to 1 if you have the <sys/stat.h> header file. */
+#define HAVE_SYS_STAT_H 1
+
+/* Define to 1 if you have the <sys/types.h> header file. */
+#define HAVE_SYS_TYPES_H 1
+
+/* Define to 1 if you have the <unistd.h> header file. */
+#define HAVE_UNISTD_H 1
+
+/* Define to the sub-directory in which libtool stores uninstalled libraries.
+   */
+#define LT_OBJDIR ".libs/"
+
+/* Name of package */
+#define PACKAGE "libdbus-c++"
+
+/* Define to the address where bug reports for this package should be sent. */
+#define PACKAGE_BUGREPORT "andreas.volz@tux-style.com"
+
+/* Define to the full name of this package. */
+#define PACKAGE_NAME "libdbus-c++"
+
+/* Define to the full name and version of this package. */
+#define PACKAGE_STRING "libdbus-c++ 0.9.0"
+
+/* Define to the one symbol short name of this package. */
+#define PACKAGE_TARNAME "libdbus-c--"
+
+/* Define to the home page for this package. */
+#define PACKAGE_URL ""
+
+/* Define to the version of this package. */
+#define PACKAGE_VERSION "0.9.0"
+
+/* Define to necessary symbol if this constant uses a non-standard name on
+   your system. */
+/* #undef PTHREAD_CREATE_JOINABLE */
+
+/* Define to 1 if you have the ANSI C header files. */
+#define STDC_HEADERS 1
+
+/* Version number of package */
+#define VERSION "0.9.0"
-- 
2.7.4

